var lido_environment=function(){var e={};e.name="lido",e.id="lido",e.title="LIDO",e.version="0.5",e.workflow=[],e.init=function(){};var t=function(e,t){var r=n(e,t);return r.textContent.trim()},n=function(e,t){for(var n=e,r=0;r<t.length;r++)n=n.getElementsByTagName(t[r])[0];return n};return e.getIdentifiersFromDB=function(e){getWithAJAX("http://dd-dariah.uni-koeln.de/exist/apps/wahn/oai-pmh.xql?verb=ListIdentifiers&metadataPrefix=lido",function(r){var i=r.responseXML;log(i);var o=n(i,["OAI-PMH","ListIdentifiers"]),a=map(o.children,function(e){return t(e,["identifier"])});e(a)})},e.showIdentifierSelect=function(){e.getIdentifiersFromDB(function(t){log(t),APP.GUI.showSelectFrame(t,t,e.loadDocumentFromDB,"LIDO Documents in Database",void 0)})},e.loadDocumentFromDB=function(t){var r="http://dd-dariah.uni-koeln.de/exist/apps/wahn/oai-pmh.xql?verb=GetRecord&identifier="+t+"&metadataPrefix=lido";getWithAJAX(r,function(t){var r=t.responseXML;log(r);var i=n(r,["OAI-PMH","GetRecord","record","metadata","lido"]);log(i),e.importLIDOXML(i),log("XML imported!")})},e.importLIDOXML=function(r){var i={};i={source:n(r,["lidoRecID"]).getAttribute("lido:source"),object_id:t(r,["lidoRecID"]),concept_id:t(r,["category","conceptID"]),legal_body:t(r,["descriptiveMetadata","objectIdentificationWrap","repositoryWrap","repositorySet","repositoryName","legalBodyName","appellationValue"]),type:t(r,["category","term"]),classification:t(r,["category","conceptID"]),rights:{type:t(r,["administrativeMetadata","rightsWorkWrap","rightsWorkSet","rightsType","term"]),earliest_date:t(r,["administrativeMetadata","rightsWorkWrap","rightsWorkSet","rightsDate","earliestDate"]),latest_date:t(r,["administrativeMetadata","rightsWorkWrap","rightsWorkSet","rightsDate","latestDate"]),legal_body:t(r,["administrativeMetadata","rightsWorkWrap","rightsWorkSet","rightsHolder","legalBodyName","appellationValue"])},record:{id:t(r,["administrativeMetadata","recordWrap","recordID"]),type:t(r,["administrativeMetadata","recordWrap","recordType","term"]),source:t(r,["administrativeMetadata","recordWrap","recordSource","legalBodyName","appellationValue"])},resource:{id:t(r,["administrativeMetadata","resourceWrap","resourceSet","resourceID"]),link:t(r,["administrativeMetadata","resourceWrap","resourceSet","resourceRepresentation","linkResource"]),representation_type:n(r,["administrativeMetadata","resourceWrap","resourceSet","resourceRepresentation"]).getAttribute("lido:type"),type:t(r,["administrativeMetadata","resourceWrap","resourceSet","resourceType","term"]),source:t(r,["administrativeMetadata","resourceWrap","resourceSet","resourceSource","legalBodyName","appellationValue"])}},e.workflow[0].recall(i);var o={title:t(r,["descriptiveMetadata","objectIdentificationWrap","titleWrap","titleSet","appellationValue"]),legal_body:t(r,["descriptiveMetadata","objectIdentificationWrap","repositoryWrap","repositorySet","repositoryName","legalBodyName","appellationValue"]),inventory_number:t(r,["descriptiveMetadata","objectIdentificationWrap","repositoryWrap","repositorySet","workID"]),descriptive_note:t(r,["descriptiveMetadata","objectIdentificationWrap","objectDescriptionWrap","objectDescriptionSet","descriptiveNoteValue"]),display_object_measurements:t(r,["descriptiveMetadata","objectIdentificationWrap","objectMeasurementsWrap","objectMeasurementsSet","objectMeasurements","measurementsSet","measurementValue"]),measurements_unit:t(r,["descriptiveMetadata","objectIdentificationWrap","objectMeasurementsWrap","objectMeasurementsSet","objectMeasurements","measurementsSet","measurementUnit"]),measurements_type:t(r,["descriptiveMetadata","objectIdentificationWrap","objectMeasurementsWrap","objectMeasurementsSet","objectMeasurements","measurementsSet","measurementType"])};e.workflow[1].recall(o);var a={title:t(r,["descriptiveMetadata","eventWrap","eventSet","displayEvent"]),type:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventType","term"]),earliest_date:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventDate","earliestDate"]),latest_date:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventDate","latestDate"]),culture:t(r,["descriptiveMetadata","eventWrap","eventSet","event","culture","term"]),actor:{name:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventActor","actorInRole","actor","nameActorSet","appellationValue"]),actor_id:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventActor","actorInRole","actor","actorID"]),earliest_date:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventActor","actorInRole","actor","vitalDatesActor","earliestDate"]),latest_date:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventActor","actorInRole","actor","vitalDatesActor","latestDate"]),role:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventActor","actorInRole","roleActor","term"]),gender:t(r,["descriptiveMetadata","eventWrap","eventSet","event","eventActor","actorInRole","actor","genderActor"])}};e.workflow[2].recall(a);var s={display_subject:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","displaySubject"]),subject_concept:"",subject_date:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectDate","displayDate"]),subject_place:"",event:{title:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","displayEvent"]),type:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","event","eventType","term"]),earliest_date:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","event","eventDate","earliestDate"]),latest_date:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","event","eventDate","latestDate"]),culture:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","event","culture","term"]),actor:{name:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","event","eventActor","actorInRole","actor","nameActorSet","appellationValue"]),actor_id:"",earliest_date:"YYYY",latest_date:"YYYY",role:t(r,["descriptiveMetadata","objectRelationWrap","subjectWrap","subjectSet","subject","subjectEvent","event","eventActor","actorInRole","roleActor"]),gender:"male"}}};return e.workflow[3].recall(s),i},e.settings=function(){return[]},e.recall=function(e){},e.getSaveData=function(){},e.getProjectName=function(){return e.workflow[0].getSaveData().start_form.digitalisierungssignatur.digitalisierungssignatur},e.reset=function(){},APP.environments.add(e),e}();lido_environment.lido_generator=function(e){"use strict";var t=new XMLString;t.reset(),t.setElementPrefix("lido");var n=(lido_environment.workflow[0],function(e,n,r){"search"==r?t.element("term",e,[["lido:addedSearchTerm",n]]):"lang"==r?t.element("term",e,[["xml:lang",n]]):"encoding"==r?t.element("term",e,[["lido:encodinganalog",n]]):"encoding_search"==r?t.element("term",e,[["lido:addedSearchTerm",n[0]],["lido:encodinganalog",n[1]]]):t.element("term",e)}),r=function(e){switch(e){case"Bühnenmodell":return"300007122";case"Brief":return"300026879";case"Buch":return"300028051";case"Büste":return"300047457";case"Dia":return"300128371";case"Film":return"300136900";case"Filmfotografie":return"300134997";case"Filmplakat":return"300027221";case"Fotoalbum":return"300026695";case"Fotonegativ":return"300127173";case"Gemälde":return"300033799";case"Handpuppe":return"300211106";case"Handschrift":return"300028571";case"Inszenierungsfotografie":return"300138191";case"Libretti":return"300026424";case"Marionette":return"300211126";case"Noten":return"300026427";case"Papiertheater":return"300263033";case"Personenfotografie":return"300138191";case"Porträtgrafik":return"300264849";case"Porzellanfigur":return"300047090";case"Postkarte":return"300026778";case"Programmheft":return"300027217";case"Rezension":return"300054688";case"Schattenspielfigur":return"300211230";case"Statue":return"300047600";case"Stockpuppe":return"300226128";case"Szenische Grafik":return"300264849";case"Tanzfotografie":return"300138191";case"Theaterbaufotografie":return"300138191";case"Theaterbaugrafik":return"300264849";case"Theatermaske":return"300138758";case"Theaterplakat":return"300027221";case"Theaterzettel":return"300027217";case"Totenmaske":return"300047724";case"Typoskript":return"300028577";case"Zeitschrift":return"300215389";case"Zeitungsausschnitt":return"300026867";case"sonstige Fotografie":return"300138191";case"sonstige Grafik":return"300264849";case"sonstige Figur":return"300047090";case"sonstige Maske":return"300138758";case"sonstiges Modell":return"300047753";default:return""}},i=function(e){t.header(),t.open("lido",[["xmlns:lido","http://www.lido-schema.org"],["xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"],["xsi:schemaLocation","http://www.lido-schema.org http://www.lido-schema.org/schema/v1.0/lido-v1.0.xsd"]]),t.element("lidoRecID",e.lido1.start_form.digitalisierungssignatur.digitalisierungssignatur,[["lido:source","Theaterwissenschaftliche Sammlung, Universität zu Köln"],["lido:type","local"]]),t.open("category"),t.element("conceptID",e.lido1.start_form.eintragsdokumentation.objektsignatur,[["lido:type","AAT"]]),n(e.lido1.start_form.eintragsdokumentation.eintragsart,"de","lang"),t.close("category"),t.open("descriptiveMetadata"),t.open("objectClassificationWrap"),t.open("objectWorkTypeWrap"),t.open("objectWorkType"),t.element("conceptID",r(e.lido2.beschreibung_form.objektzuordnung.objektart),[["lido:type","AAT"]]);var i=new Array("yes",r(e.lido2.beschreibung_form.objektzuordnung.objektart));n(e.lido2.beschreibung_form.objektzuordnung.objektgattung,i,"encoding_search"),t.close("objectWorkType"),t.close("objectWorkTypeWrap"),t.open("classificationWrap"),t.open("classification",[["lido:type","AAT:type"]]),t.element("conceptID",r(e.lido2.beschreibung_form.objektzuordnung.objektart),[["lido:type","AAT:type"]]),t.element("term",e.lido2.beschreibung_form.objektzuordnung.objektart,[["lido:addedSearchTerm","yes"]]),t.close("classification"),t.close("classificationWrap"),t.close("objectClassificationWrap"),t.open("objectIdentificationWrap"),t.open("titleWrap"),t.open("titleSet"),t.element("appellationValue",e.lido2.beschreibung_form.objekt_identifikation.titels,[["lido:pref","preferred"],["xml:lang","de"]]),t.close("titleSet"),t.close("titleWrap"),t.open("repositoryWrap"),t.open("repositorySet",[["lido:type","current"]]),t.open("repositoryName"),t.open("legalBodyName"),t.element("appellationValue",e.lido2.beschreibung_form.objekt_identifikation.besitzende_institution),t.close("legalBodyName"),t.close("repositoryName"),t.open("repositoryLocation"),t.open("namePlaceSet"),t.element("appellationValue",e.lido2.beschreibung_form.objekt_identifikation.standort_tws),t.close("namePlaceSet"),t.close("repositoryLocation"),t.element("workID",e.lido2.beschreibung_form.objekt_identifikation.inventarnummer,[["lido:type","inventory number"]]),t.close("repositorySet"),t.close("repositoryWrap"),t.open("objectDescriptionWrap"),t.open("objectDescriptionSet"),t.element("descriptiveNoteValue",e.lido2.beschreibung_form.objekt_identifikation.objektbeschreibung),t.close("objectDescriptionSet"),t.close("objectDescriptionWrap"),t.open("objectMeasurementsWrap"),t.open("objectMeasurementsSet"),t.open("objectMeasurements"),t.open("measurementsSet"),t.element("measurementType",e.lido2.beschreibung_form.objekt_identifikation.maßtyp),t.element("measurementUnit",e.lido2.beschreibung_form.objekt_identifikation.maßeinheit),t.element("measurementValue",e.lido2.beschreibung_form.objekt_identifikation.maße),t.close("measurementsSet"),t.close("objectMeasurements"),t.close("objectMeasurementsSet"),t.close("objectMeasurementsWrap"),t.close("objectIdentificationWrap"),t.open("eventWrap"),t.open("eventSet"),t.element("displayEvent",e.lido3.herstellung_form.herstellungsbeschreibung),t.open("event"),t.open("eventType"),n("Herstellung"),t.close("eventType"),t.open("eventActor"),forEach(e.lido3.persons.list,function(e){t.open("actorInRole"),t.open("actor",[["lido:type","person"]]),t.element("actorID",e.pnd_id,[["lido:type","d-nb.info"],["lido:source","http://d-nb.info/gnd/"+e.pnd_id]]),t.open("nameActorSet"),t.element("appellationValue",e.name,[["lido:pref","preferred"]]),t.close("nameActorSet"),t.open("vitalDatesActor"),t.element("earliestDate",e.geburtsjahr),t.element("latestDate",e.sterbejahr),t.close("vitalDatesActor"),t.element("genderActor",e.geschlecht),t.close("actor"),t.open("roleActor"),n(e["function"]),t.close("roleActor"),t.close("actorInRole")}),t.close("eventActor"),t.open("culture"),n(e.lido3.herstellung_form.culture),t.close("culture"),t.open("eventDate"),t.open("date"),t.element("earliestDate",e.lido3.herstellung_form.earliest_date),t.element("latestDate",e.lido3.herstellung_form.latest_date),t.close("date"),t.close("eventDate"),t.close("event"),t.close("eventSet"),t.close("eventWrap"),t.open("eventWrap"),t.open("eventSet"),t.element("displayEvent",e.lido4.inszenierung_form.performancebeschreibung),t.open("event"),t.open("eventType"),n("Performance"),t.close("eventType"),t.open("eventActor"),forEach(e.lido4.persons.list,function(e){t.open("actorInRole"),t.open("actor",[["lido:type","person"]]),t.element("actorID",e.pnd_id,[["lido:type","d-nb.info"],["lido:source","http://d-nb.info/gnd/"+e.pnd_id]]),t.open("nameActorSet"),t.element("appellationValue",e.name,[["lido:pref","preferred"]]),t.close("nameActorSet"),t.open("vitalDatesActor"),t.element("earliestDate",e.geburtsjahr),t.element("latestDate",e.sterbejahr),t.close("vitalDatesActor"),t.element("genderActor",e.geschlecht),t.close("actor"),t.open("roleActor"),n(e["function"]),t.close("roleActor"),t.close("actorInRole")}),t.close("eventActor"),t.open("culture"),n(e.lido4.inszenierung_form.culture),t.close("culture"),t.open("eventDate"),t.open("date"),t.element("earliestDate",e.lido4.inszenierung_form.earliest_date),t.element("latestDate",e.lido4.inszenierung_form.latest_date),t.close("date"),t.close("eventDate"),t.close("event"),t.close("eventSet"),t.close("eventWrap"),t.open("eventWrap"),t.open("eventSet"),t.element("displayEvent",e.lido5.erwerb_form.provenienzbeschreibung),t.open("event"),t.open("eventType"),n("Provenienz"),t.close("eventType"),t.open("eventActor"),forEach(e.lido5.persons.list,function(e){t.open("actorInRole"),t.open("actor",[["lido:type","person"]]),t.element("actorID",e.pnd_id,[["lido:type","d-nb.info"],["lido:source","http://d-nb.info/gnd/"+e.pnd_id]]),t.open("nameActorSet"),t.element("appellationValue",e.name,[["lido:pref","preferred"]]),t.close("nameActorSet"),t.open("vitalDatesActor"),t.element("earliestDate",e.geburtsjahr),t.element("latestDate",e.sterbejahr),t.close("vitalDatesActor"),t.element("genderActor",e.geschlecht),t.close("actor"),t.open("roleActor"),n(e["function"]),t.close("roleActor"),t.close("actorInRole")}),t.close("eventActor"),t.open("culture"),n(e.lido5.erwerb_form.culture),t.close("culture"),t.open("eventDate"),t.open("date"),t.element("earliestDate",e.lido5.erwerb_form.earliest_date),t.element("latestDate",e.lido5.erwerb_form.latest_date),t.close("date"),t.close("eventDate"),t.close("event"),t.close("eventSet"),t.close("eventWrap"),t.open("objectRelationWrap"),t.open("subjectWrap"),t.open("subjectSet"),t.element("displaySubject",e.lido2.beschreibung_form.objektzuordnung.thematik.thematik),t.open("subject"),t.open("subjectDate"),t.element("displayDate","Wo soll das eingegeben werden?"),t.close("subjectDate"),t.open("subjectEvent"),t.element("displayEvent","Wo soll das eingegeben werden?"),t.open("event"),t.open("eventType"),n("Wo soll das eingegeben werden?"),t.close("eventType"),t.open("eventName"),t.element("appellationValue","Wo soll das eingegeben werden?"),t.close("eventName"),t.open("eventActor"),t.element("displayActorInRole","Wo soll das eingegeben werden?"),t.open("actorInRole"),t.open("actor"),t.open("nameActorSet"),t.element("appellationValue","Wo soll das eingegeben werden?"),t.close("nameActorSet"),t.close("actor"),t.open("roleActor"),n("Wo soll das eingegeben werden?"),t.close("roleActor"),t.close("actorInRole"),t.close("eventActor"),t.open("culture"),n("Wo soll das eingegeben werden?"),t.close("culture"),t.open("eventDate"),t.open("date"),t.element("earliestDate","Wo soll das eingegeben werden?"),t.element("latestDate","Wo soll das eingegeben werden?"),t.close("date"),t.close("eventDate"),t.close("event"),t.close("subjectEvent"),t.close("subject"),t.close("subjectSet"),t.close("subjectWrap"),t.close("objectRelationWrap"),t.close("descriptiveMetadata"),t.open("administrativeMetadata",[["xml:lang","de"]]),t.open("rightsWorkWrap"),t.open("rightsWorkSet"),t.open("rightsType"),t.element("term","Wo soll das eingegeben werden?"),t.close("rightsType"),t.open("rightsDate"),t.element("earliestDate","Wo soll das eingegeben werden?"),t.element("latestDate","Wo soll das eingegeben werden?"),t.close("rightsDate"),t.open("rightsHolder"),t.open("legalBodyName"),t.element("appellationValue","Wo soll das eingegeben werden?"),t.close("legalBodyName"),t.close("rightsHolder"),t.close("rightsWorkSet"),t.close("rightsWorkWrap"),t.open("recordWrap"),t.element("recordID",e.lido1.start_form.eintragsdokumentation.objektsignatur,[["lido:type","local"]]),t.open("recordType"),t.element("term",e.lido1.start_form.eintragsdokumentation.eintragsart),t.close("recordType"),t.open("recordSource"),t.open("legalBodyName"),t.element("appellationValue","Theaterwissenschaftliche Sammlung, Universität zu Köln"),t.close("legalBodyName"),t.close("recordSource"),t.close("recordWrap"),forEach(e.lido1.resources.list,function(e){t.open("resourceWrap"),t.open("resourceSet"),t.element("resourceID",e.name,[["lido:type","local"]]),t.open("resourceRepresentation"),t.element("linkResource",e.name),t.close("resourceRepresentation"),t.open("resourceType"),t.element("term",e.type),t.close("resourceType"),t.open("resourceSource"),t.open("legalBodyName"),t.element("appellationValue","Theaterwissenschaftliche Sammlung, Universität zu Köln"),t.close("legalBodyName"),t.close("resourceSource"),t.close("resourceSet"),t.close("resourceWrap")}),t.close("administrativeMetadata")};return console.log(e),i(e),t.getString()},lido_environment.forms={},lido_environment.forms.start={name:"start",type:"form",fields:[{type:"subarea",heading:"Digitalisierungssignatur",name:"digitalisierungssignatur",fields:[{heading:void 0,name:"digitalisierungssignatur",type:"text",default_value:"TWS_",comment:"DIESER EINTRAG DARF NUR IN ABSPRACHE MIT NORA PROBST VORGENOMMEN WERDEN; diese Signatur ist angelehnt an den Dateinamen des Digitalisats; WICHTIG: diese Signatur beginnt immer zuerst mit den drei Buchstaben “TWS”, dann kommt ein Unterstrich “_” und dann eine Buchstabenkombination, die die Abteilung innerhalb der TWS bezeichnet (BEISPIELE: TWS_FIN00327; TWS_FGL00542: TWS_G0148902)"}]},{type:"subarea",heading:"Eintragsdokumentation",name:"eintragsdokumentation",fields:[{heading:"Eintragsart",name:"eintragsart",type:"open_vocabulary",vocabulary:["Einzelobjekt","Konvolut"],comment:"Handelt es sich um EIN Objekt oder ein OBJEKTSAMMLUNG? Wenn möglich, sollten die Objekte als Einzelobjekte erschlossen werden (BEISPIELE für Einzelobjekt: eine Maske, ein Bühnenbildentwurf, eine Fotografie; BEISPIELE für ein Konvolut: ein Fotoalbum mit mehreren Fotos oder eine Nachlass-Box mit mehreren Einzelobjekten)"},{heading:"Objektsignatur",name:"objektsignatur",type:"text",comment:"Hier bitte die bereits bestehende Signatur des Objekts eintragen (BEISPIELE: z.B. AU9821 bei Autografen; z.B. G32906 bei Bühnenbildentwürfen; z.B. L342 bei Libretti u.s.w.)"}]}]},lido_environment.forms.objektbeschreibung={name:"objektbeschreibung",type:"form",fields:[{type:"column",title:"Objekt-Identifikation",name:"objekt_identifikation",fields:[{heading:"Titel",name:"titels",type:"text",comment:"Titel des Objekts (BEISPIELE: Schattenspielfigur Hacivat des Karagöz; Parsifal, Modell; Radiozauberer, Der); wenn Inszenierungsbezug, dann hier den vollständigen deutschen Titel eintragen (auch bei Opern den deutschen Titel nehmen, nicht den italienischen); keine Kurztitel verwenden; ggf. sollte man den Titel online nochmal recherchieren; die Artikel am Ende platzieren: Der, Die, Das / Ein, Einer (BEISPIELE: „Vetter aus Dingsda, Der“; „Wintermärchen, Ein“; „Räuber, Die“)"},{heading:"Objektbeschreibung",name:"objektbeschreibung",type:"textarea",comment:"Beschreibung des Objekts, d.h. des Materials, des Erhaltungszustands, Beschreibung von etwaig vorhandenen Inschriften; es geht nicht so sehr um den Bildinhalt, sondern um die formale Beschreibung des Objektzustands (BEISPIELE: alt-ägyptische Schattenspielfigur aus Leder mit transparenten Farbfeldern, leichte Beschädigung oben links ODER Schwarz-Weiß-Fotografie einer Faust-Inszenierung, Gelatinesilber, Beschriftung auf der Rückseite: Gustaf Gründgens als Mephisto, Willi Quadflieg als Faust ODER grafischer Entwurf, Tusche und Wasserfarben, Einstichlöcher in den Ecken)"},{heading:"Maße",name:"maße",type:"text",comment:"Höhe x Breite x Tiefe (BEISPIELE: 24 x 18; 120 x 50 x 31)"},{heading:"Maßeinheit",name:"maßeinheit",type:"text",default_value:"cm"},{heading:"Maßtyp",name:"maßtyp",type:"text",default_value:"H x B x T"},{heading:"Inventarnummer",name:"inventarnummer",type:"text",comment:"Hier die Inventarnummer des Objekts eintragen: zuerst “INV.” und dann eine Nummer (BEISPIELE: Inv.5032; Inv. 10983; …)"},{heading:"Besitzende Institution",name:"besitzende_institution",type:"text",default_value:"Theaterwissenschaftliche Sammlung, Universität zu Köln"},{heading:"Standort in der TWS",name:"standort_tws",type:"open_vocabulary",vocabulary:["Autografensammlung","Bibliothek","Büsten und Statuetten","Druckgrafik","Filmarchiv","Fotoabteilung","obere Grafik","untere Grafik","Hänneschen-Sammlung","Kriegstheaterarchiv","Kritikenabteilung","Programmheftabteilung","Puppensammlung","Rara","Schattenspielsammlung","Zeitschriften"]}]},{type:"column",title:"Objekt-Zuordnung",name:"objektzuordnung",fields:[{heading:"Objektgattung",name:"objektgattung",type:"open_vocabulary",vocabulary:["Bild","Figur","Maske","Modell","Schrift"]},{heading:"Objektart",name:"objektart",type:"open_vocabulary",vocabulary:["Bühnenmodell","Brief","Buch","Büste","Dia","Film","Filmfotografie","Filmplakat","Fotoalbum","Fotonegativ","Gemälde","Handpuppe","Handschrift","Inszenierungsfotografie","Libretti","Marionette","Noten","Papiertheater","Personenfotografie","Postkarte","Porträtgrafik","Porzellanfigur","Programmheft","Rezension","Schattenspielfigur","Statue","Stockpuppe","Szenische Grafik","Tanzfotografie","Theaterbaufotografie","Theaterbaugrafik","Theatermaske","Theaterplakat","Theaterzettel","Totenmaske","Typoskript","Zeitschrift","Zeitungsausschnitt","Sonstige Fotografie","sonstige Grafik","sonstige Figur","sonstige Maske","sonstiges Modell","sonstiges Objekt"]},{type:"subarea",heading:"Thematik / Bildinhalt / Abgebildete Person",name:"thematik",fields:[{heading:"Thematik",name:"thematik",type:"textarea",comment:"Worum geht es inhaltlich, kurze Beschreibung z.B. des Bildinhalts (dargestellte Person? dargestellte Inszenierung? Dargestellte Szene?) oder des Bezugsthemas (BEISPIELE: Foto von der Uraufführung von Wagners Parsifal: zu sehen ist das Bühnenbild sowie der Opernsänger XY; Spielfigur Wayang Golek; Porträt von Hansgünther Heyme…)"}]}]}]},lido_environment.forms.herstellung={name:"herstellung",title:"Herstellung des Objekts",type:"form",fields:[{heading:"Herstellungsbeschreibung",name:"herstellungsbeschreibung",type:"textarea",comment:"Beschreibung der Herstellung (BEISPIEL: Bühnenbildentwurf ausgeführt im Auftrag von Richard Wagner; Fotografie aufgenommen  im Fotostudio (nicht auf der Bühne); …)"},{heading:"Ort",name:"ort",type:"text",comment:"Ort der Herstellung; idealerweise hier den Städtenamen in dt. Sprache eintragen (ansonsten das Land); wenn nur die Region bekannt ist, dann diese in das Feld ‚kultureller Kontext‘ eintragen; wenn Ort unbekannt, dann leer lassen"},{heading:"Datum (frühestes)",name:"earliest_date",type:"year",comment:"Herstellungsdatum (das früheste bekannte); wenn das Herstellungsjahr bekannt ist, dann in “frühestes Datum” und “spätestes Datum” die gleiche Jahreszahl eintragen; wenn das Herstellungsdatum unbekannt ist, dann frühesten und spätesten Zeitpunkt der Herstellung schätzen"},{heading:"Datum (spätestes)",name:"latest_date",type:"year",comment:"Herstellungsdatum (das späteste bekannte); wenn das Herstellungsjahr bekannt ist, dann in “frühestes Datum” und “spätestes Datum” die gleiche Jahreszahl eintragen; wenn das Herstellungsdatum unbekannt ist, dann frühesten und spätesten Zeitpunkt der Herstellung schätzen"},{heading:"Kultureller Kontext",name:"culture",type:"text",comment:"Kultureller Kontext der UrheberIn (BEISPIELE: China; Europa; Ost-Asien; Ost-Europa; Arabischer Raum; Süddeutschland; Rheinland; …)"}]},lido_environment.forms.actor_herstellung={name:"actor",type:"form",fields:[{name:"name",heading:"Name (Name, Vorname)",type:"text",comment:"erst Nachname, dann Vorname; bei mittelalterlichen Personen oder dem Hochadel den Vornamen (BEISPIELE: Georg II.; Walter von der Vogelweide; Wolfram von Eschenbach); Namen mit “von” oder “zu” oder “van der” erst nach dem Vornamen (BEISPIELE: Goethe, Johann Wolfgang von; Velde, Henry van der; Kleist, Heinrich von)"},{name:"function",heading:"Funktion",type:"open_vocabulary",vocabulary:["BildhauerIn","BühnenbildnerIn","FotografIn","KomponistIn","KünstlerIn","MalerIn","ErstellerIn des Konvoluts","VerfasserIn"]},{name:"pnd_id",heading:"AkteurIn ID (PNG)",type:"text",comment:"muss nicht ausgefüllt werden (Recherche der ID kann unter https://portal.dnb.de/opac.htm?method=showSearchForm#top durchgeführt werden); BEISPIELE: 115810757, 1052161499)"},{name:"geburtsjahr",heading:"Geburtsjahr",type:"year",comment:"JJJJ (BEISPIELE: 1984; 1843)"},{name:"sterbejahr",heading:"Sterbejahr",type:"year",comment:"JJJJ (BEISPIELE: 1991; 1873)"},{name:"geschlecht",heading:"Geschlecht",type:"select",vocabulary:["male","female"]}]},lido_environment.forms.inszenierung={name:"inszenierung",title:"Inszenierung / Performance",type:"form",fields:[{name:"titel",heading:"Titel",type:"text",comment:"Titel der Inszenierung / Performance; wenn Inszenierungsbezug, dann hier den vollständigen deutschen Titel eintragen (auch bei Opern den deutschen Titel nehmen, nicht den italienischen); keine Kurztitel verwenden; ggf. sollte man den Titel online nochmal recherchieren; die Artikel am Ende platzieren: Der, Die, Das / Ein, Einer (BEISPIELE: „Vetter aus Dingsda, Der“; „Wintermärchen, Ein“; „Räuber, Die“); hier darf u.U. auch die Spieltradition eingetragen werden (BEISPIELE: Karagöz; Wayang; Fasching; Karnevalsumzug; Passionsspiele; …)"},{heading:"Performance-Beschreibung",name:"performancebeschreibung",type:"textarea",comment:"Beschreibung der Art der Performance (BEISPIELE: indischer Kathakali-Tanz; Performance des Kollektivs SheShePop; Operninszenierung; Freilichttheaterinszenierung, …)"},{heading:"Ort",name:"ort",type:"text",comment:"Ort der Performance; idealerweise hier den Städtenamen in dt. Sprache eintragen (ansonsten das Land); wenn nur die Region bekannt ist, dann diese in das Feld ‚kultureller Kontext‘ eintragen; wenn Ort unbekannt, dann leer lassen"},{heading:"Datum (frühestes)",name:"earliest_date",type:"year",comment:"Datum der Performance (das früheste bekannte im Hinblick auf das vorliegende Objekt); wenn das Jahr bekannt ist, dann in “frühestes Datum” und “spätestes Datum” die gleiche Jahreszahl eintragen; wenn das Datum unbekannt ist, dann leer lassen"},{heading:"Datum (spätestes)",name:"latest_date",type:"year",comment:"Datum der Performance (das späteste bekannte im Hinblick auf das vorliegende Objekt); wenn das Jahr bekannt ist, dann in “frühestes Datum” und “spätestes Datum” die gleiche Jahreszahl eintragen; wenn das Datum unbekannt ist, dann leer lassen"},{heading:"Kultureller Kontext",name:"culture",type:"text",comment:"Kultureller Kontext der Performance / Inszenierung: wenn die Performance in Köln stattfand, dann “Rheinland” – egal ob die Performance türkisches Karagöz oder ähnliches beinhaltet; hier ausschließlich den kulturellen Kontext der Performance eintragen (BEISPIELE: China; Europa; Ost-Asien; Ost-Europa; Arabischer Raum; Süddeutschland; Rheinland; …)"}]},lido_environment.forms.actor_inszenierung={name:"actor",type:"form",fields:[{name:"name",heading:"Name (Name, Vorname)",type:"text",comment:"erst Nachname, dann Vorname; bei mittelalterlichen Personen oder dem Hochadel den Vornamen (BEISPIELE: Georg II.; Walter von der Vogelweide; Wolfram von Eschenbach); Namen mit “von” oder “zu” oder “van der” erst nach dem Vornamen (BEISPIELE: Goethe, Johann Wolfgang von; Velde, Henry van der; Kleist, Heinrich von)"},{name:"function",heading:"Funktion",type:"open_vocabulary",vocabulary:["AutorIn des inszenierten Werks","BühnenbildnerIn der Inszenierung","ChoreographIn des inszenierten Werks","DarstellerIn der Inszenierung","DrehbuchautorIn des Films","KomponistIn des inszenierten Werks","Konzeptionierung","RegisseurIn des inszenierten Werks"]},{name:"pnd_id",heading:"AkteurIn ID (PNG)",type:"text",comment:"muss nicht ausgefüllt werden (Recherche der ID kann unter https://portal.dnb.de/opac.htm?method=showSearchForm#top durchgeführt werden); BEISPIELE: 115810757, 1052161499)"},{name:"geburtsjahr",heading:"Geburtsjahr",type:"year",comment:"JJJJ (BEISPIELE: 1984; 1843)"},{name:"sterbejahr",heading:"Sterbejahr",type:"year",comment:"JJJJ (BEISPIELE: 1991; 1873)"},{name:"geschlecht",heading:"Geschlecht",type:"select",vocabulary:["male","female"]}]},lido_environment.forms.erwerb={name:"erwerb",title:"Provenienz / Erwerb",type:"form",fields:[{heading:"Provenienzbeschreibung",name:"provenienzbeschreibung",type:"textarea",comment:"Beschreibung, wie das Objekt in den Bestand der TWS gelangt ist (BEISPIELE: Niessen kaufte das Gemälde 1925 in Berlin vom Antiquariat Müller für 60 Mk.; Max Martersteig stiftete diese Figurine 1925 dem Kölner Institut; die Kritik stammt aus der Sammlung Hagen, die in den 1920er Jahren geschlossen in den Bestand der TWS überging)"},{heading:"Ort",name:"ort",type:"text",comment:"Ort des Erwerbs durch die TWS; idealerweise hier den Städtenamen in dt. Sprache eintragen (ansonsten das Land); wenn nur die Region bekannt ist, dann diese in das Feld ‚kultureller Kontext‘ eintragen; wenn Ort unbekannt, dann leer lassen"},{heading:"Datum (frühestes)",name:"earliest_date",type:"year",comment:"Datum des Erwerbs des Objekts durch die TWS; wenn das Jahr bekannt ist, dann in “frühestes Datum” und “spätestes Datum” die gleiche Jahreszahl eintragen; wenn das Datum unbekannt ist, dann leer lassen"},{heading:"Datum (spätestes)",name:"latest_date",type:"year",comment:"Datum des Erwerbs des Objekts durch die TWS; wenn das Jahr bekannt ist, dann in “frühestes Datum” und “spätestes Datum” die gleiche Jahreszahl eintragen; wenn das Datum unbekannt ist, dann leer lassen"},{heading:"Kultureller Kontext",name:"culture",type:"text",comment:"Kultureller Kontext des Erwerbs:  (BEISPIELE: China; Europa; Ost-Asien; Ost-Europa; Arabischer Raum; Süddeutschland; Rheinland; …)"}]},lido_environment.forms.actor_erwerb={name:"actor",type:"form",fields:[{name:"name",heading:"Name (Name, Vorname)",type:"text",comment:"erst Nachname, dann Vorname; bei mittelalterlichen Personen oder dem Hochadel den Vornamen (BEISPIELE: Georg II.; Walter von der Vogelweide; Wolfram von Eschenbach); Namen mit “von” oder “zu” oder “van der” erst nach dem Vornamen (BEISPIELE: Goethe, Johann Wolfgang von; Velde, Henry van der; Kleist, Heinrich von)"},{name:"function",heading:"Funktion",type:"open_vocabulary",vocabulary:["KäuferIn","NachlasserIn","StifterIn","VerkäuferIn","VermittlerIn","VorbesitzerIn"]},{name:"pnd_id",heading:"AkteurIn ID (PNG)",type:"text",comment:"muss nicht ausgefüllt werden (Recherche der ID kann unter https://portal.dnb.de/opac.htm?method=showSearchForm#top durchgeführt werden); BEISPIELE: 115810757, 1052161499)"
},{name:"geburtsjahr",heading:"Geburtsjahr",type:"year",comment:"JJJJ (BEISPIELE: 1984; 1843)"},{name:"sterbejahr",heading:"Sterbejahr",type:"year",comment:"JJJJ (BEISPIELE: 1991; 1873)"},{name:"geschlecht",heading:"Geschlecht",type:"select",vocabulary:["male","female"]}]},lido_environment.workflow[0]=function(){"use strict";var e,t={};return t.parent=lido_environment,t.l=t.parent.l,t.fileSelection=void 0,t.resources=new ObjectList,t.identity={id:"lido1",title:"Start: Objektidentifikation",icon:"shapes"},t.view_id="VIEW_lido1",t.substitute_for_bad_chars="_",t.init=function(e){var n=dom.make("div","files","",e);APP.forms.make(n,lido_environment.forms.start,"start_form_","",void 0,void 0),dom.h3(n,"Dateien importieren");{var r=(APP.GUI.FORMS.fileDropZone(n,"drop_zone",t.pushFileMetadata),dom.make("div","","workspace-usageTable",n,"<h3>Benutzung</h3><h4>Klick</h4><p>Datei wird ausgewählt. Ein weiterer Klick macht die Auswahl rückgängig.</p><h4>Shift</h4><p>Halte Shift, um mehrere Dateien gleichzeitig auszuwählen</p><h4>Escape</h4><p>Alle Dateien werden deselektiert</p>"),dom.make("div","file_list_div","",e));dom.make("div","list","",r)}t.fileSelection=new APP.GUI.selectionMechanism("file_entry_","selected_file",function(e){t.resources.get(e.index).selected=e.selected,t.fadeFilesThatStartWithSameNameAsSelectedOnes()}),t.refresh(!0)},t.view=function(){APP.GUI.scrollTop()},t.getFileType=function(e){var n=t.file_types,r=e.lastIndexOf("."),i=e.slice(r+1),o={type:"unknown",mimetype:"unknown"},s=a(n.valid_lamus_written_resource_file_types,0),l=s.indexOf(i);return-1!=s.indexOf(i)?(o.type=n.valid_lamus_written_resource_file_types[l][2],o.mimetype=n.valid_lamus_written_resource_file_types[l][1],o):o},t.file_types={valid_file_types:[["eaf","text/x-eaf+xml","Annotation"],["mdf","Unknown","Unspecified"],["pdf","application/pdf","Primary Text"],["xml","text/xml","Annotation"],["txt","text/plain","Unspecified"],["htm","text/html","Unspecified"],["html","text/html","Unspecified"].audio,["mpg","video/mpeg","video"],["mpeg","video/mpeg","video"],["mp4","video/mp4","video"],["aif","audio/x-aiff","audio"],["aiff","audio/x-aiff","audio"],["jpg","image/jpeg","image"],["jpeg","image/jpeg","image"],["png","image/png","image"],["tif","image/tiff","image"],["tiff","image/tiff","image"],["smil","application/smil+xml","video"].Unspecified,["doc","application/msword","Unspecified"],["odf","application/vnd.oasis.opendocument.formula","Unspecified"],["odt","application/vnd.oasis.opendocument.text","Unspecified"],["xls","application/vnd.ms-excel","Unspecified"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","Unspecified"],["ppt","application/vnd.ms-powerpoint","Unspecified"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation","Unspecified"].video,["mov","video/quicktime","video"],["mp3","Unknown","audio"],["avi","video/x-msvideo","video"],["au","audio/basic","audio"]]},t.recall=function(e){e&&t.resources.setState(e.resources),APP.forms.fill(lido_environment.forms.start,"start_form_",e.start_form),t.refresh()},t.getSaveData=function(){t.resources.deleteKeyInAllItems("dataURL");var e={resources:t.resources.getState(),start_form:APP.forms.makeObjectWithFormData(lido_environment.forms.start,"start_form_")};return e},t.functions=function(){return[{id:"link_sort_alphabetically",icon:"az",label:"Alphabetisch sortieren",onclick:function(){t.sortAlphabetically()}},{id:"link_remove_files",icon:"reset",label:"Entfernen",onclick:function(){t.removeSelectedFiles()}},{id:"link_clear_file_list",icon:"reset",label:"Liste löschen",onclick:function(){t.reset()}}]},t.refresh=function(n){var r=g("list");r.innerHTML="",t.resources.forEach(function(e,n){t.renderResource({number:n,title:e.name,mime_type:e.mime_type,file_size:e.size,lastModified:e.lastModified,id:"file_entry_"+n,className:"file_entry media_file_entry",parent:r,status:e.status,path:e.path,dataURL:e.dataURL})}),0===t.resources.length&&(r.innerHTML="<h2>Keine Dateien importiert.</h2>"),e&&!n&&e.refresh(),t.fileSelection.selected_files=[]},t.renderResource=function(e){{var n=dom.make("div",e.id,e.className,e.parent);dom.make("h2","","file_entry_title",n,e.title),dom.make("p","","",n,e.mimeType+'<br><span class="size_span">Größe: '+e.file_size+'</span><br><span name="date_span" class="date_span">Letzte Änderung: '+e.lastModified+"</span><br>")}if(e.dataURL){var r=dom.make("img","res_img_"+e.id,"lidoresource_img",n);r.src=e.dataURL}n.addEventListener("click",function(e){return function(){t.fileSelection.clickedOnFile(e)}}(e.number),!1)},t.pushFileMetadata=function(e){for(var n,r=0;n=e[r];r++)t.addFileToList(n)},t.addFileToList=function(e){var n=new FileReader;n.onloadend=function(){t.resources.add({name:e.name,type:e.type||"n/a",size:strings.bytesToSize(e.size,1),lastModified:e.lastModifiedDate.toLocaleDateString(),status:"stable",dataURL:n.result}),t.refresh()},n.readAsDataURL(e)},t.sortAlphabetically=function(){t.resources.sortByKey("name"),t.refresh()},t.removeSelectedFiles=function(){var e=t.fileSelection.selected_files,n=t.resources.mapIndexesToIDs(e);t.resources.removeByID(n),t.refresh()},t.getIDsOfResourcesThatStartWithTheSameNameAsThis=function(e){var n=t.resources.getByID(e),r=t.resources.filter(function(t){return e==t.id?!1:strings.isSubstringAStartOfAWordInString(strings.removeEndingFromFilename(t.name),strings.removeEndingFromFilename(n.name))?!0:!1}),i=getArrayWithIDs(r);return i},t.fadeFilesThatStartWithSameNameAsSelectedOnes=function(){for(var e,n="file_entry_",r=[],i=0;i<t.resources.length;i++)g(n+i.toString()).style.opacity="1";for(var o=0;o<t.fileSelection.selected_files.length;o++){var a=t.fileSelection.selected_files[o],s=t.resources.idOf(a);r.push(s);var l=t.resources.idOf(a);e=t.getIDsOfResourcesThatStartWithTheSameNameAsThis(l);for(var c=0;c<e.length;c++)r.push(e[c])}for(i=0;i<r.length;i++){var d=t.resources.indexOf(r[i]);g(n+d.toString()).style.opacity="0.5"}},t.handleFileListInputChange=function(e){var n,r=e.target.files[0];return"txt"!=strings.getFileTypeFromFilename(r.name)?void APP.log("File List must be of type TXT!","error"):void readFileAsText(r,function(e){try{n=strings.linesToArray(e)}catch(r){return void console.info("No files found! Maybe this file list is not valid!")}forEach(n,function(e){e.length>0&&" "!=e&&t.resources.add({name:strings.getFilenameFromFilePath(e),path:strings.getDirectoryFromFilePath(e),status:"stable"})}),t.refresh()})},t.reset=function(){t.resources.reset(),t.refresh()},t}(),lido_environment.workflow.push(function(){"use strict";var e={};e.parent=lido_environment;return e.element_id_prefix="actor_",e.identity={id:"lido2",title:"Objektbeschreibung",icon:"edit"},e.module_view,e.init=function(t){APP.forms.make(t,e.parent.forms.objektbeschreibung,"objektbeschreibung_","objektbeschreibung_",void 0)},e.getSaveData=function(){var t={beschreibung_form:APP.forms.makeObjectWithFormData(e.parent.forms.objektbeschreibung,"objektbeschreibung_")};return t},e.recall=function(e){APP.forms.fill(lido_environment.forms.objektbeschreibung,"objektbeschreibung_",e.beschreibung_form)},e.functions=function(){return[]},e}()),lido_environment.workflow[2]=function(){"use strict";var e=function(){var e=APP.forms.makeObjectWithFormData(r.person_form,r.form_id_prefix);return e},t=function(e){r.saveActivePerson("without_refreshing"),r.show(r.persons.idOf(e))},n=function(){return!r.persons.isThereAnyItemWhereKeyIsValue("name","")},r={};return r.parent=lido_environment,r.person_form=r.parent.forms.actor_herstellung,r.persons=new ObjectList,r.element_id_prefix="lido3_",r.form_id_prefix=r.element_id_prefix+"af_",r.identity={id:"lido3",title:"Herstellung",icon:"user"},r.module_view,r.actor_wrap,r.init=function(e){r.persons.reset(),r.module_view=e,r.left_wrap=dom.make("div",r.element_id_prefix+"left_wrap","left_wrap",r.module_view),dom.h2(r.left_wrap,"Herstellung des Objekts"),dom.br(r.left_wrap),APP.forms.make(r.left_wrap,r.parent.forms.herstellung,"herstellung_","herstellung_",void 0),r.actor_wrap=dom.make("div",r.element_id_prefix+"actor_wrap","actor_wrap",r.module_view),r.gui_list=new APP.GUI.FORMS.clickableListSmall(r.actor_wrap,[],[],t,r.element_id_prefix+"list",0);dom.make("div",r.element_id_prefix+"view","",r.actor_wrap);r.refresh(!0)},r.getSaveData=function(){r.saveActivePerson("without_refreshing");var e={persons:r.persons.getState(),herstellung_form:APP.forms.makeObjectWithFormData(lido_environment.forms.herstellung,"herstellung_")};return e},r.showNoPersonsMessage=function(){var e=r.actor_wrap;e.innerHTML="";var t=dom.make("h2","no_persons_text","no_persons_text",e);t.innerHTML="Es gibt noch keine AkteurInnen. Warum ";var n=dom.make("a",r.element_id_prefix+"new_person_link",r.element_id_prefix+"new_person_link",t);n.innerHTML="erstellst",t.innerHTML+=" du nicht welche?",g(r.element_id_prefix+"new_person_link").addEventListener("click",function(){r.createNewPerson()})},r.recall=function(e){APP.forms.fill(lido_environment.forms.herstellung,"herstellung_",e.herstellung_form),r.persons.setState(e.persons),r.refresh(),r.show(r.persons.getPointer())},r.functions=function(){return[{id:r.element_id_prefix+"link_new_person",icon:"plus",label:"Neue AkteurIn",onclick:function(){r.createNewPerson()}},{id:r.element_id_prefix+"link_delete_active_person",icon:"reset",label:"Diese AkteurIn löschen",onclick:function(){r.handleClickOnDeletePerson()}},{id:r.element_id_prefix+"link_sort_persons_alphabetically",icon:"az",label:"AkteurInnen alphabetisch sortieren",onclick:function(){r.saveActivePerson(),r.persons.sortByKey("name"),r.refresh(),APP.log("Personen sortiert")}},{id:r.element_id_prefix+"link_duplicateActivePerson",icon:"duplicate_user",label:"AkteurIn duplizieren",onclick:function(){r.saveActivePerson(),r.persons.duplicateActive(),r.refresh(),APP.log("Person gespeichert und dupliziert","success")}},{id:r.element_id_prefix+"link_delete_all_persons",icon:"reset",label:"Alle AkteurInnen löschen",onclick:r.erase_database}]},r.erase_database=function(){APP.confirm("Möchtest du wirklich alle AkteurInnen löschen?",function(e){e||(r.persons.reset(),APP.log("Alle AkteurInnen gelöscht"),r.refresh())},"Nein","Ja, löschen!")},r.show=function(e){if(0==r.persons.length)return void console.info("person.show: No persons to show!");var t=r.persons.getIndexByID(e);"undefined"==typeof t&&(console.warn("person.show: Undefined person_id! Showing person 0"),t=0),console.log("Showing person "+t),r.createFormIfNotExistent(),r.gui_list.changeHighlight(t),r.persons.setPointer(e),r.refreshFormTitle();var n=r.persons.getActive();APP.forms.fill(r.person_form,r.form_id_prefix,n)},r.refreshFormTitle=function(){var e=g(r.element_id_prefix+"form_title"),t=r.getDisplayName(r.persons.getActive());e.innerHTML=""==t?"Unbenannte AkteurIn":t},r.createFormIfNotExistent=function(){var e=g(r.element_id_prefix+"lidoperson_view");if(!e){e=dom.make("div",r.element_id_prefix+"lidoperson_view","lidoperson_view",r.actor_wrap),e.innerHTML="";var t=dom.make("div",r.element_id_prefix+"title_div","lidoperson_title_div",e);dom.make("h1",r.element_id_prefix+"form_title","lidoperson_form_title",t,"Neue AkteurIn"),dom.make("div",r.element_id_prefix+"content_div","lidoperson_content_div",e),APP.forms.make(g(r.element_id_prefix+"content_div"),r.parent.forms.actor_herstellung,r.form_id_prefix,r.form_id_prefix,void 0,void 0),g(r.form_id_prefix+"name").addEventListener("blur",r.saveActivePerson)}},r.saveActivePerson=function(t){if(-1!=r.persons.getPointer()){var n=e();return n.display_name=r.getDisplayName(n),r.save(n),r.refresh(),r.refreshFormTitle(),n}},r.save=function(e){return r.persons.replaceActive(e),e},r.createNewPerson=function(e){if(r.saveActivePerson(),!n())return void APP.alert("Bitte gib all deinen AkteurInnen zuerst einen Namen!");e||(e=APP.forms.createEmptyObjectFromTemplate(r.person_form)),e.display_name=r.getDisplayName(e);var t=r.persons.add(e);r.createFormIfNotExistent(),r.refresh(),r.show(t)},r.handleClickOnDeletePerson=function(){if(-1==typeof r.persons.pointer)return void console.warn("Active Person is undefined. Don't know what to delete!");var e,t=r.persons.getActive().name;e=""==t?"Möchtest du diese AkteurIn wirklich löschen?":"Möchtest du "+t+"wirklich löschen?",APP.confirm(e,function(e){e||(r.deleteActivePerson(),APP.log(""+t+" gelöscht!"))},"Nein","Ja, löschen")},r.deleteActivePerson=function(){r.persons.removeActive(),r.refresh()},r.refresh=function(){r.actor_wrap.innerHTML="";var e=r.persons.map(function(e){return r.getDisplayName(e.id)}),t=r.persons.map(function(e){return r.getDisplayRole(e.id)});r.gui_list.refresh(e,t),0==r.persons.length?(r.showNoPersonsMessage(),APP.environments.disableFunction(r.element_id_prefix+"link_delete_active_person"),APP.environments.disableFunction(r.element_id_prefix+"sa_div"),APP.environments.disableFunction(r.element_id_prefix+"link_duplicateActivePerson")):(r.createFormIfNotExistent(),r.show(r.persons.getPointer()),r.gui_list.changeHighlight(r.persons.getActiveIndex()),APP.environments.enableFunction(r.element_id_prefix+"link_delete_active_person"),APP.environments.enableFunction(r.element_id_prefix+"sa_div"),APP.environments.enableFunction(r.element_id_prefix+"link_duplicateActivePerson"))},r.getDisplayName=function(e){var t;return"object"==typeof e?t=e:r.persons.existsByID(e)&&(t=r.persons.getByID(e)),t?t.name&&""!=t.name?t.name:"Unbenannte AkteurIn":console.warn("Person undefined!")},r.getDisplayRole=function(e){var t;return"object"==typeof e?t=e:r.persons.existsByID(e)&&(t=r.persons.getByID(e)),t?t["function"]&&""!=t["function"]?t["function"]:"":console.warn("Person undefined!")},r.areAllPersonsNamed=function(){for(var e=0;e<r.persons.length;e++){var t=r.persons.get(e);if(""==t.fullName&&""==t.nameSortBy&&""==t.nameKnownAs)return!1}return!0},r}(),lido_environment.workflow[3]=function(){"use strict";var e=function(){var e=APP.forms.makeObjectWithFormData(r.person_form,r.form_id_prefix);return e},t=function(e){r.saveActivePerson("without_refreshing"),r.show(r.persons.idOf(e))},n=function(){return!r.persons.isThereAnyItemWhereKeyIsValue("name","")},r={};return r.parent=lido_environment,r.person_form=r.parent.forms.actor_inszenierung,r.persons=new ObjectList,r.element_id_prefix="lido4_",r.form_id_prefix=r.element_id_prefix+"af_",r.identity={id:"lido4",title:"Inszenierung",icon:"user"},r.module_view,r.actor_wrap,r.init=function(e){r.persons.reset(),r.module_view=e,r.left_wrap=dom.make("div",r.element_id_prefix+"left_wrap","left_wrap",r.module_view),dom.h2(r.left_wrap,"Inszenierung / Performance"),dom.br(r.left_wrap),APP.forms.make(r.left_wrap,r.parent.forms.inszenierung,"inszenierung_","inszenierung_",void 0),r.actor_wrap=dom.make("div",r.element_id_prefix+"actor_wrap","actor_wrap",r.module_view),r.gui_list=new APP.GUI.FORMS.clickableListSmall(r.actor_wrap,[],[],t,r.element_id_prefix+"list",0);dom.make("div",r.element_id_prefix+"view","",r.actor_wrap);r.refresh(!0)},r.getSaveData=function(){r.saveActivePerson("without_refreshing");var e={persons:r.persons.getState(),inszenierung_form:APP.forms.makeObjectWithFormData(lido_environment.forms.inszenierung,"inszenierung_")};return e},r.showNoPersonsMessage=function(){var e=r.actor_wrap;e.innerHTML="";var t=dom.make("h2","no_persons_text","no_persons_text",e);t.innerHTML="Es gibt noch keine AkteurInnen. Warum ";var n=dom.make("a",r.element_id_prefix+"new_person_link",r.element_id_prefix+"new_person_link",t);n.innerHTML="erstellst",t.innerHTML+=" du nicht welche?",g(r.element_id_prefix+"new_person_link").addEventListener("click",function(){r.createNewPerson()})},r.recall=function(e){APP.forms.fill(lido_environment.forms.inszenierung,"inszenierung_",e.inszenierung_form),r.persons.setState(e.persons),r.refresh(),r.show(r.persons.getPointer())},r.functions=function(){return[{id:r.element_id_prefix+"link_new_person",icon:"plus",label:"Neue AkteurIn",onclick:function(){r.createNewPerson()}},{id:r.element_id_prefix+"link_delete_active_person",icon:"reset",label:"Diese AkteurIn löschen",onclick:function(){r.handleClickOnDeletePerson()}},{id:r.element_id_prefix+"link_sort_persons_alphabetically",icon:"az",label:"AkteurInnen alphabetisch sortieren",onclick:function(){r.saveActivePerson(),r.persons.sortByKey("name"),r.refresh(),APP.log("Personen sortiert")}},{id:r.element_id_prefix+"link_duplicateActivePerson",icon:"duplicate_user",label:"AkteurIn duplizieren",onclick:function(){r.saveActivePerson(),r.persons.duplicateActive(),r.refresh(),APP.log("Person gespeichert und dupliziert","success")}},{id:r.element_id_prefix+"link_delete_all_persons",icon:"reset",label:"Alle AkteurInnen löschen",onclick:r.erase_database}]},r.erase_database=function(){APP.confirm("Möchtest du wirklich alle AkteurInnen löschen?",function(e){e||(r.persons.reset(),APP.log("Alle AkteurInnen gelöscht"),r.refresh())},"Nein","Ja, löschen!")},r.show=function(e){if(0==r.persons.length)return void console.info("person.show: No persons to show!");var t=r.persons.getIndexByID(e);"undefined"==typeof t&&(console.warn("person.show: Undefined person_id! Showing person 0"),t=0),console.log("Showing person "+t),r.createFormIfNotExistent(),r.gui_list.changeHighlight(t),r.persons.setPointer(e),r.refreshFormTitle();var n=r.persons.getActive();APP.forms.fill(r.person_form,r.form_id_prefix,n)},r.refreshFormTitle=function(){var e=g(r.element_id_prefix+"form_title"),t=r.getDisplayName(r.persons.getActive());e.innerHTML=""==t?"Unbenannte AkteurIn":t},r.createFormIfNotExistent=function(){var e=g(r.element_id_prefix+"lidoperson_view");if(!e){e=dom.make("div",r.element_id_prefix+"lidoperson_view","lidoperson_view",r.actor_wrap),e.innerHTML="";var t=dom.make("div",r.element_id_prefix+"title_div","lidoperson_title_div",e);dom.make("h1",r.element_id_prefix+"form_title","lidoperson_form_title",t,"Neue AkteurIn"),dom.make("div",r.element_id_prefix+"content_div","lidoperson_content_div",e),APP.forms.make(g(r.element_id_prefix+"content_div"),r.parent.forms.actor_inszenierung,r.form_id_prefix,r.form_id_prefix,void 0,void 0),g(r.form_id_prefix+"name").addEventListener("blur",r.saveActivePerson)}},r.saveActivePerson=function(t){if(-1!=r.persons.getPointer()){var n=e();return n.display_name=r.getDisplayName(n),r.save(n),r.refresh(),r.refreshFormTitle(),n}},r.save=function(e){return r.persons.replaceActive(e),e},r.createNewPerson=function(e){if(r.saveActivePerson(),!n())return void APP.alert("Bitte gib all deinen AkteurInnen zuerst einen Namen!");e||(e=APP.forms.createEmptyObjectFromTemplate(r.person_form)),e.display_name=r.getDisplayName(e);var t=r.persons.add(e);r.createFormIfNotExistent(),r.refresh(),r.show(t)},r.handleClickOnDeletePerson=function(){if(-1==typeof r.persons.pointer)return void console.warn("Active Person is undefined. Don't know what to delete!");var e,t=r.persons.getActive().name;e=""==t?"Möchtest du diese AkteurIn wirklich löschen?":"Möchtest du "+t+"wirklich löschen?",APP.confirm(e,function(e){e||(r.deleteActivePerson(),APP.log(""+t+" gelöscht!"))},"Nein","Ja, löschen")},r.deleteActivePerson=function(){r.persons.removeActive(),r.refresh()},r.refresh=function(){r.actor_wrap.innerHTML="";var e=r.persons.map(function(e){return r.getDisplayName(e.id)}),t=r.persons.map(function(e){return r.getDisplayRole(e.id)});r.gui_list.refresh(e,t),0==r.persons.length?(r.showNoPersonsMessage(),APP.environments.disableFunction(r.element_id_prefix+"link_delete_active_person"),APP.environments.disableFunction(r.element_id_prefix+"sa_div"),APP.environments.disableFunction(r.element_id_prefix+"link_duplicateActivePerson")):(r.createFormIfNotExistent(),r.show(r.persons.getPointer()),r.gui_list.changeHighlight(r.persons.getActiveIndex()),APP.environments.enableFunction(r.element_id_prefix+"link_delete_active_person"),APP.environments.enableFunction(r.element_id_prefix+"sa_div"),APP.environments.enableFunction(r.element_id_prefix+"link_duplicateActivePerson"))},r.getDisplayName=function(e){var t;return"object"==typeof e?t=e:r.persons.existsByID(e)&&(t=r.persons.getByID(e)),t?t.name&&""!=t.name?t.name:"Unbenannte AkteurIn":console.warn("Person undefined!")},r.getDisplayRole=function(e){var t;return"object"==typeof e?t=e:r.persons.existsByID(e)&&(t=r.persons.getByID(e)),t?t["function"]&&""!=t["function"]?t["function"]:"":console.warn("Person undefined!")},r.areAllPersonsNamed=function(){for(var e=0;e<r.persons.length;e++){var t=r.persons.get(e);if(""==t.fullName&&""==t.nameSortBy&&""==t.nameKnownAs)return!1}return!0},r}(),lido_environment.workflow[4]=function(){"use strict";var e=function(){var e=APP.forms.makeObjectWithFormData(r.person_form,r.form_id_prefix);return e},t=function(e){r.saveActivePerson("without_refreshing"),r.show(r.persons.idOf(e))},n=function(){return!r.persons.isThereAnyItemWhereKeyIsValue("name","")},r={};return r.parent=lido_environment,r.person_form=r.parent.forms.actor_erwerb,r.persons=new ObjectList,r.element_id_prefix="lido5_",r.form_id_prefix=r.element_id_prefix+"af_",r.identity={id:"lido5",title:"Erwerb",icon:"user"},r.module_view,r.actor_wrap,r.init=function(e){r.persons.reset(),r.module_view=e,r.left_wrap=dom.make("div",r.element_id_prefix+"left_wrap","left_wrap",r.module_view),dom.h2(r.left_wrap,"Provenienz / Erwerb"),dom.br(r.left_wrap),APP.forms.make(r.left_wrap,r.parent.forms.erwerb,"erwerb_","erwerb_",void 0),r.actor_wrap=dom.make("div",r.element_id_prefix+"actor_wrap","actor_wrap",r.module_view),r.gui_list=new APP.GUI.FORMS.clickableListSmall(r.actor_wrap,[],[],t,r.element_id_prefix+"list",0);dom.make("div",r.element_id_prefix+"view","",r.actor_wrap);r.refresh(!0)},r.getSaveData=function(){r.saveActivePerson("without_refreshing");var e={persons:r.persons.getState(),erwerb_form:APP.forms.makeObjectWithFormData(lido_environment.forms.erwerb,"erwerb_")};return e},r.showNoPersonsMessage=function(){var e=r.actor_wrap;e.innerHTML="";var t=dom.make("h2","no_persons_text","no_persons_text",e);t.innerHTML="Es gibt noch keine AkteurInnen. Warum ";var n=dom.make("a",r.element_id_prefix+"new_person_link",r.element_id_prefix+"new_person_link",t);n.innerHTML="erstellst",t.innerHTML+=" du nicht welche?",g(r.element_id_prefix+"new_person_link").addEventListener("click",function(){r.createNewPerson()})},r.recall=function(e){APP.forms.fill(lido_environment.forms.erwerb,"erwerb_",e.erwerb_form),r.persons.setState(e.persons),r.refresh(),r.show(r.persons.getPointer())},r.functions=function(){return[{id:r.element_id_prefix+"link_new_person",icon:"plus",label:"Neue AkteurIn",onclick:function(){r.createNewPerson()}},{id:r.element_id_prefix+"link_delete_active_person",icon:"reset",label:"Diese AkteurIn löschen",onclick:function(){r.handleClickOnDeletePerson()}},{id:r.element_id_prefix+"link_sort_persons_alphabetically",icon:"az",label:"AkteurInnen alphabetisch sortieren",onclick:function(){r.saveActivePerson(),r.persons.sortByKey("name"),r.refresh(),APP.log("Personen sortiert")}},{id:r.element_id_prefix+"link_duplicateActivePerson",icon:"duplicate_user",label:"AkteurIn duplizieren",onclick:function(){r.saveActivePerson(),r.persons.duplicateActive(),r.refresh(),APP.log("Person gespeichert und dupliziert","success")}},{id:r.element_id_prefix+"link_delete_all_persons",icon:"reset",label:"Alle AkteurInnen löschen",onclick:r.erase_database}]},r.erase_database=function(){APP.confirm("Möchtest du wirklich alle AkteurInnen löschen?",function(e){e||(r.persons.reset(),APP.log("Alle AkteurInnen gelöscht"),r.refresh())},"Nein","Ja, löschen!")},r.show=function(e){if(0==r.persons.length)return void console.info("person.show: No persons to show!");var t=r.persons.getIndexByID(e);"undefined"==typeof t&&(console.warn("person.show: Undefined person_id! Showing person 0"),t=0),console.log("Showing person "+t),r.createFormIfNotExistent(),r.gui_list.changeHighlight(t),r.persons.setPointer(e),r.refreshFormTitle();var n=r.persons.getActive();APP.forms.fill(r.person_form,r.form_id_prefix,n)},r.refreshFormTitle=function(){var e=g(r.element_id_prefix+"form_title"),t=r.getDisplayName(r.persons.getActive());e.innerHTML=""==t?"Unbenannte AkteurIn":t},r.createFormIfNotExistent=function(){var e=g(r.element_id_prefix+"lidoperson_view");if(!e){e=dom.make("div",r.element_id_prefix+"lidoperson_view","lidoperson_view",r.actor_wrap),e.innerHTML="";var t=dom.make("div",r.element_id_prefix+"title_div","lidoperson_title_div",e);dom.make("h1",r.element_id_prefix+"form_title","lidoperson_form_title",t,"Neue AkteurIn"),dom.make("div",r.element_id_prefix+"content_div","lidoperson_content_div",e),APP.forms.make(g(r.element_id_prefix+"content_div"),r.parent.forms.actor_erwerb,r.form_id_prefix,r.form_id_prefix,void 0,void 0),g(r.form_id_prefix+"name").addEventListener("blur",r.saveActivePerson)}},r.saveActivePerson=function(t){if(-1!=r.persons.getPointer()){var n=e();return n.display_name=r.getDisplayName(n),r.save(n),r.refresh(),r.refreshFormTitle(),n}},r.save=function(e){return r.persons.replaceActive(e),e},r.createNewPerson=function(e){if(r.saveActivePerson(),!n())return void APP.alert("Bitte gib all deinen AkteurInnen zuerst einen Namen!");e||(e=APP.forms.createEmptyObjectFromTemplate(r.person_form)),e.display_name=r.getDisplayName(e);var t=r.persons.add(e);r.createFormIfNotExistent(),r.refresh(),r.show(t)},r.handleClickOnDeletePerson=function(){if(-1==typeof r.persons.pointer)return void console.warn("Active Person is undefined. Don't know what to delete!");var e,t=r.persons.getActive().name;e=""==t?"Möchtest du diese AkteurIn wirklich löschen?":"Möchtest du "+t+"wirklich löschen?",APP.confirm(e,function(e){e||(r.deleteActivePerson(),APP.log(""+t+" gelöscht!"))},"Nein","Ja, löschen")},r.deleteActivePerson=function(){r.persons.removeActive(),r.refresh()},r.refresh=function(){r.actor_wrap.innerHTML="";var e=r.persons.map(function(e){return r.getDisplayName(e.id)}),t=r.persons.map(function(e){return r.getDisplayRole(e.id)});r.gui_list.refresh(e,t),0==r.persons.length?(r.showNoPersonsMessage(),APP.environments.disableFunction(r.element_id_prefix+"link_delete_active_person"),APP.environments.disableFunction(r.element_id_prefix+"sa_div"),APP.environments.disableFunction(r.element_id_prefix+"link_duplicateActivePerson")):(r.createFormIfNotExistent(),r.show(r.persons.getPointer()),r.gui_list.changeHighlight(r.persons.getActiveIndex()),APP.environments.enableFunction(r.element_id_prefix+"link_delete_active_person"),APP.environments.enableFunction(r.element_id_prefix+"sa_div"),APP.environments.enableFunction(r.element_id_prefix+"link_duplicateActivePerson"))},r.getDisplayName=function(e){var t;return"object"==typeof e?t=e:r.persons.existsByID(e)&&(t=r.persons.getByID(e)),t?t.name&&""!=t.name?t.name:"Unbenannte AkteurIn":console.warn("Person undefined!")},r.getDisplayRole=function(e){var t;return"object"==typeof e?t=e:r.persons.existsByID(e)&&(t=r.persons.getByID(e)),t?t["function"]&&""!=t["function"]?t["function"]:"":console.warn("Person undefined!")},r.areAllPersonsNamed=function(){for(var e=0;e<r.persons.length;e++){var t=r.persons.get(e);if(""==t.fullName&&""==t.nameSortBy&&""==t.nameKnownAs)return!1}return!0},r}(),lido_environment.workflow.push(function(){"use strict";var e,t,n,r,i,o={};return o.parent=lido_environment,o.view_element,o.identity={id:"xml_output",title:"XML Output",icon:"submit"},o.init=function(a){e=o.parent.workflow[0],t=o.parent.workflow[1],n=o.parent.workflow[2],r=o.parent.workflow[3],i=o.parent.workflow[4],o.view_element=a},o.view=function(){return APP.save(),""==e.getSaveData().object_id?(APP.view("VIEW_lido_lido1"),void APP.alert("You must provide a valid Record ID!")):void o.generate()},o.functions=function(){return[]},o.generate=function(){o.view_element.innerHTML="";var a={lido1:e.getSaveData(),lido2:t.getSaveData(),lido3:n.getSaveData(),lido4:r.getSaveData(),lido5:i.getSaveData()},s=lido_environment.lido_generator(a),l=lido_environment.getProjectName()+".xml",c={url:"http://dd-dariah.uni-koeln.de/exist/apps/wahn/importpage.html",xml_string_key:"content",additional_data:"name="+l,additional_headers:[{key:"Content-Type",value:"application/x-www-form-urlencoded; charset=UTF-8"}]};APP.GUI.createXMLOutputDIV(o.view_element,l,"ta_0",s,l,!1,c)},o}());